<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
		<!--<title>牧场超市</title>-->
		<title>趣味农场</title>
		<link rel="stylesheet" type="text/css" href="__WAP__/bootstrap-3.3.7/dist/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/header.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/style.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/spirit.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/media_quer.css" />
		<script src="__WAP__/js/jquery.js"></script>
		<link rel="stylesheet" type="text/css" href="__WAP__/css/media_quer-background.css" />
		<style type="text/css">
			.detail04 {
				width: 100%;
				position: fixed;
				bottom: 0;
				left: 0;
				height: 40px;
				background-color: white;
				display: flex;
				justify-content: flex-end;
				    border-top: 1px solid #d9d9d9;
			}

			.detail04 div {
				line-height:  40px;
				height:  40px;
				display: flex;
				margin-left: 1rem;
			}

			.detail04 div:nth-child(1) span {
				color: #a9a9a9;
				font-size: 14px;
				/*margin: 0 0.1rem;*/
			}

			.detail04 div:nth-child(1) span.em {
				color: black;
			}

			.detail04 div:nth-child(2) p {
				line-height:  40px;
				height: 40px;
				padding: 0 1rem;
				background: linear-gradient(to right, #3db4cc, #6fd6ea);
				color: white;
			}

			.wrapper {
				box-sizing: border-box;
				border: 1px solid rgba(240, 240, 243, 0);
			}

			.sheep {
				width: 100%;
				padding: 0.5rem 0;
			}

			.sheep li {
				margin-bottom: 0.5rem;
				background-color: white;
				width: 100%;
				border-radius: 1rem;
				padding: 0.5rem;
				box-sizing: border-box;
				overflow: hidden;
			}

			.sheep li>div {
				float: left;
			}

			.sheep li>div:nth-child(1),.quan>div {
				margin-top: 20px;
				border: 1px solid #3db4cc;
				background-color: white box-sizing: border-box;
				width: 20px;
				height: 20px;
				border-radius: 50%;
				box-sizing: border-box;
			}

			.sheep li>div:nth-child(1)>span,.quan>div span {
				text-align: center;
				line-height: 20px;
				width: 20px;
				height: 20px;
				padding-right: 5px;
				color: white;
				font-size: 0.5rem;
				font-weight: bold;
				box-sizing: border-box;
			}

			.sheep li>div.dui,.quan>div.dui {
				background-color: #3db4cc !important;
			}

			.sheep li .imgs img {
				width: 100px;
				height: auto;
			}

			.name {
				margin-top: 15px;
			}

			.name p {
				line-height: 20px;
			}

			.name p:nth-child(1) {
				width: 100%;
				white-space: nowrap;
				text-overflow: ellipsis;
				overflow: hidden;
			}

			.name p:nth-child(2) {
				display: flex;
				color: violet;
			}

			.shu {
				float: right !important;
				margin-top: 23px;
				width: 80px;
				position: relative;
				height: 25px;
				border-radius: 15px;
				overflow: hidden;

			}

			.shu input {
				width: 100%;
				height: 100%;
				text-align: center;
				background-color: gainsboro;
			}

			.shu span {
				width: 25px;
				height: 25px;
				border-radius: 15px;
				font-size: 2.5rem;
				text-align: center;
				line-height: 25px;
				box-shadow: 1px 1px 2px #888888;
			}

			.shu .jian {
				position: absolute;
				top: 0;
				left: 0;
				background-color: white;
				color:#3db4cc;
				line-height: 20px;
			}

			.shu .jia {
				position: absolute;
				top: 0;
				right: 0;
				background-color: #3db4cc;
				color: white;
			}
			/*提示*/

			.modal1 {
				width: 20rem;
				height: 8rem;
				position: fixed;
				z-index: 1002;
				left: 50%;
				margin-left: -10rem;
				border-radius: 0.5rem;
				top: 50%;
				margin-top: -8rem;
				text-align: center;
				background: #e8e8e8;
				color: #3d4145;
				display: none;
			}

			.modal1 p {
				line-height: 4rem;
				font-size: 1.5rem;
			}

			.modal1 p:nth-child(2) {
				display: flex;
				border-top: 1px solid white;
			}

			.modal1 p:nth-child(2) span {
				width: 50%;
				text-align: center;
				padding: 0 .25rem;
				height: 2rem;
				line-height: 2rem;
				text-align: center;
				color: #0894ec;
				background: #e8e8e8;
				box-sizing: border-box;
				margin-top: 1rem;
			}

			.modal1 p:nth-child(2) span:nth-child(1) {
				border-right: 1px solid white;
			}

			#goodcover {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background-color: black;
				z-index: 1001;
				-moz-opacity: 0.65;
				opacity: 0.65;
			}
			.quan{
				overflow: hidden;
				position: fixed;
				bottom: 5px;
				left: 2.5%;
				margin-left: 0.5rem;
			}
			.quan div,.quan p{
				float: left;
				margin: 0 5px 0 0;
			}
			.quan p{
				line-height: 25px;
			}
		</style>
	</head>

	<body>
		<div class="wrapper" id="shopping_mall">
			<!--header -->

			<div class="content infinite-scroll native-scroll">
				<!--超市物品展示-->
				<ul class="sheep">
					<li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595616fe7b16f.jpg" />
						</div>
						<div class="name">
							<p>123313131111111111111111</p>
							<p><span>￥</span><span class="qian">123</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<input type="tel" name="" id="" value="1" maxlength="4" />
							<span class="jia">+</span>
						</div>
					</li>
					<li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595619ce1b33b.jpg" />
						</div>
						<div class="name">
							<p>123313131</p>
							<p><span>￥</span><span class="qian">663</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<input type="tel" name="" id="" value="1" maxlength="4" />
							<span class="jia">+</span>
						</div>
					</li>
					<li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595617b6e853f.jpg" />
						</div>
						<div class="name">
							<p>123313131</p>
							<p><span>￥</span><span class="qian">951</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<input type="tel" name="" id="" value="1" maxlength="4" />
							<span class="jia">+</span>
						</div>
					</li>

				</ul>
			</div>
			<!--footer-->
			<div class="detail04">

				<div class="">
					<span>共</span>
					<span class="em" id="numbers">0</span>
					<span>件</span>
					<span>小计</span>
					<span>￥</span>
					<span class="em" id="qian">0</span>

				</div>
				<div class="" >
					<p 	onclick="window.location='{:url("Supermarket/pay")}'">立即购买</p>
				</div>
			</div>
			<div class="quan">
					<div class="dui">
							<span>√</span>
						</div>
						<p>全选</p>
				</div>
		</div>
		<div class="background"></div>
		<div class="modal1">
			<p>是否删除本商品？</p>
			<p class="modal1_p"><span class="modal-button">取消</span><span class="modal-button modal-button-bold">确定</span></p>
		</div>
		<div id="goodcover"></div>
		<script src="__WAP__/js/jquery.fly.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(".name").width(($(".sheep li").width() - 210) + "px");
	$("input").focus(function(){this.blur()})
			/*footer 当前页选中状态*/
			sw();
			/*选中切换*/
			$(".sheep li>div:nth-child(1)").click(function() {
				$(this).toggleClass("dui");
				sw();
			})
			$(".quan div").click(function() {
				$(this).toggleClass("dui");
				var th = $(this).hasClass('dui');
				if(th == true){
					$(".sheep li>div:nth-child(1)").addClass("dui");
				}else{
					$(".sheep li>div:nth-child(1)").removeClass("dui");
				}
				sw();
			})
			/*数量加*/
			$(".jia").click(function() {
				$(this).prev().val(parseInt($(this).prev().val()) + 1);
				var danjia = parseInt($(this).parent().prev().children("p:last-child").children("span:last-child").text()); //单价
				var shus = $(this).prev().val();
				sw();
			})
			/*数量减*/
			var nas;
			$(".jian").click(function() {
				var val = parseInt($(this).next().val());
				if(val > 1) {
					$(this).next().val(val - 1);
					sw();
				} else {
					/*deletes($(this).parent().parent());*/
					nas = $(this).parent().parent();
					$(".modal1").css("display", "block");
					$("#goodcover").css("display", "block");

				}
			})
			$(".shu input").bind('input', function() {
				if($(this).val() < 1) {
					$(this).val("1");
				} else if($(this).val() > 1) {
					$(this).val(Math.abs($(this).val()));
				} else if($(this).val() == "") {
					$(this).val("1");
				}
				sw();
			})
			/*总价数量变化*/
			function sw() {
				var quantitys = 0; //数量
				var pricess = 0; //总价
				for(var i = 0; i < $(".sheep li").length; i++) {
					var du = $(".sheep li:nth-child(" + (i + 1) + ")>div:nth-child(1)").hasClass('dui');
					if(du == true) {
						var prices = parseInt($(".sheep li:nth-child(" + (i + 1) + ") .qian").text()); //单个物品单价
						var quantity = parseInt($(".sheep li:nth-child(" + (i + 1) + ") input").val()); //单个物品数量
						quantitys = quantitys + quantity;
						pricess = pricess + prices * quantity;
					}
				}
				$("#numbers").text(quantitys);
				$("#qian").text(pricess);

			}
			/*弹窗确定的删除*/
			$(".modal-button-bold").click(function(){
				nones();
				nas.remove();
				sw();
			});

			/*弹窗*/
			$("#goodcover").click(function() {
				nones();
			})
			$(".modal1_p span:nth-child(1)").click(function() {
				nones();
			})

			function nones() {
				$(".modal1").css("display", "none");
				$("#goodcover").css("display", "none");
			}
		</script>
	</body>

</html>