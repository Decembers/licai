<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
		<!--<title>牧场超市</title>-->
		<title>趣味农场</title>
		<link rel="stylesheet" type="text/css" href="__WAP__/bootstrap-3.3.7/dist/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/header.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/style.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/spirit.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/media_quer.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/font-awesome-4.7.0/css/font-awesome.min.css" />
		<script src="__WAP__/js/jquery.js"></script>
		<link rel="stylesheet" type="text/css" href="__WAP__/css/media_quer-background.css" />
		<style type="text/css">
		.content {
				box-sizing: border-box;
				padding: 0.5rem 0;
			}
			
			.detail04 {
				width: 100%;
				position: fixed;
				bottom: 0;
				left: 0;
				height: 40px;
				background-color: white;
				padding-left: 2.5%;
				display: flex;
				justify-content: flex-end;
				/*border-top: 1px solid #d9d9d9;*/
				    border-top: 1px solid #F3F3F3;
			}
			
			.detail04 div {
				line-height: 40px;
				height: 40px;
				display: flex;
			}
			
			.quan {
				overflow: hidden;
				margin: 0 10px 0 0.5rem;
			}
			
			.quan div,
			.quan p {
				float: left;
				margin: 0 5px 0 0;
			}
			
			.quan div {
				margin-top: 10px !important;
			}
			
			.quan p {
				line-height: 15px;
				line-height: 40px;
				color: #606060;
			}
			
			.detail04>div:nth-child(2) {
				flex-grow: 1;
				margin-right: 1rem;
			}
			
			.detail04 div:nth-child(2) span {
				color: #606060;
				font-size: 14px;
			}
			
			/*.detail04 div:nth-child(2) span.em {
				color: black;
			}*/
			
			.detail04 div:nth-child(3) p {
				text-align: center;
				line-height: 40px;
				height: 40px;
				background: linear-gradient(to right, #3db4cc, #6fd6ea);
				color: white;
				font-size: 16px;
				padding: 0 2rem;
			}
			
			.wrapper {
				box-sizing: border-box;
				border: 1px solid rgba(240, 240, 243, 0);
			}
			
			.sheep {
				width: 100%;
				padding: 0.5rem 0;
			}
			
			.sheep li {
				margin-bottom: 0.5rem;
				background-color: white;
				width: 100%;
				border-radius: 1rem;
				padding: 0.5rem;
				box-sizing: border-box;
				overflow: hidden;
				position: relative;
			}
			
			.sheep li>div {
				float: left;
			}
			
			.sheep li>div:nth-child(1),
			.quan>div {
				margin-top: 25px;
				border: 1px solid #3db4cc;
				background-color: white;
				box-sizing: border-box;
				width: 20px;
				height: 20px;
				border-radius: 50%;
				box-sizing: border-box;
			}
			
			.sheep li>div:nth-child(1)>span,
			.quan>div span {
				text-align: center;
				line-height: 18px;
				width: 18px;
				height: 18px;
				color: white;
				font-size: 12px;
				font-weight: bold;
				box-sizing: border-box;
			}
			
			.sheep li>div.dui,
			.quan>div.dui {
				background-color: #3db4cc !important;
			}
			.sheep li .imgs{
				width:80px;
				height: 70px;
				padding: 5px;
				margin-left: 5px;
				
			}
			.sheep li .imgs img {
				width: 70px;
				height: 60px;				
				border: 1px solid #F3F3F3;
			}
			
			.name {
				margin-top: 5px;
				margin-left: 5px;
			}
			
			.name p {
				line-height: 20px;
			}
			
			.name p:nth-child(1) {
				width: 100%;
				white-space: nowrap;
				text-overflow: ellipsis;
				overflow: hidden;
				color: #606060;
			}
			
			.name p:nth-child(2) {
				display: flex;
				color: #3db4cc;
				line-height: 30px;
			}
			
			.shu {
				width: 90px;
				position: absolute;
				top: 25px;
				right: 1rem;
				height: 30px;
				border-radius: 15px;
				overflow: hidden;
			}
			
			.shu .input {
				width: 100%;
				height: 100%;
				text-align: center;
				background-color: #EAEAEA;
				color: #3db4cc;
				line-height: 30px;
			}
			
			.shu span {
				width: 30px;
				height: 30px;
				border-radius: 15px;
				font-size: 18px;
				text-align: center;
				font-weight: 600;
				line-height: 30px;
				box-shadow: 1px 1px 2px #888888;
				box-sizing: border-box;
			}
			
			.shu .jian {
				position: absolute;
				top: 0;
				left: 0;
				background-color: white;
				color: #3db4cc;
			}
			
			.shu .jia {
				position: absolute;
				top: 0;
				right: 0;
				background-color: #3db4cc;
				color: white;
			}
			/*提示*/
			
			.modal1 {
				width: 80%;
				height: 100px;
				position: fixed;
				z-index: 1002;
				left: 50%;
				margin-left: -40%;
				border-radius: 10px;
				top: 50%;
				margin-top: -50px;
				text-align: center;
				background: #e8e8e8;
				color: #3d4145;
				display: none;
				overflow: hidden;
			}
			
			.modal1 p {
				line-height: 50px;
				font-size: 16px;
			}
			
			.modal1 p:nth-child(2) {
				display: flex;
				border-top: 1px solid #d9d9d9;
			}
			
			.modal1 p:nth-child(2) span {
				width: 50%;
				text-align: center;
				padding: 0 .25rem;
				height: 50px;
				line-height: 50px;
				text-align: center;
				color: #0894ec;
				background: #e8e8e8;
				box-sizing: border-box;
			}
			
			.modal1 p:nth-child(2) span:nth-child(1) {
				border-right: 1px solid #d9d9d9;
			}
			
			#goodcover {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background-color: black;
				z-index: 1001;
				-moz-opacity: 0.65;
				opacity: 0.65;
			}
			/*top*/
			
			.top {
				background-color: #F3F3F3;
				display: flex;
			}
			
			.top div {
				width: 30px;
				height: 30px;
				border-radius: 50%;
				overflow: hidden;
			}
			
			.top div img {
				width: 50px;
				height: 50px;
				margin: -10px 0 0 -10px;
			}
			
			.top span {
				line-height: 30px;
				margin-left: 1rem;color: #606060;
			}
			/*none*/
			.none{
				width: 90%;
				height: 50;
				position: fixed;
				top: 50%;
				left: 50%;
				margin-left: -45%;				
				margin-top: -100px;
				display: none;
			}
			.none p:nth-child(1){
				position: relative;top: 0;
				left: 50%;
				margin-left: -26px;color: #3db4cc;
			}
			.none p:nth-child(2){			
				text-align: center;				
				color: #3db4cc;
				font-size: 18px;
				line-height: 30px;
			}
			.none a{
				width: 100px;
				height: 30px;
				border-radius:15px ;
				background-color:#3db4cc ;
				color: white;font-size: 16px;
				text-align: center;
				line-height: 30px;
				margin: 10px  auto;
			}
			
			/*top*/
			.top1 {
				
				padding: 0 5%;
				/*border-bottom: 1px ;
				border-top: 1px ;*/
				background-color: white;
				
			}
			
			.top1 p {
				width: 100%;
				display: flex;
			}
			.top1 p img{
				width: 20px;
				height: 20px;
				margin-right: 5px;
				margin-top: 2px;
			}
		
			
			.top1 p:nth-child(1) {
				font-size: 17px;
			}
			.top1 p:nth-child(1) span{
				color: #606060 !important;
			}
			.top1 p:nth-child(2) {
				
			}
			.top1 p:nth-child(2) span{
				flex-grow: 1;
				width: 90%;white-space:nowrap; text-overflow:ellipsis; overflow:hidden;
			}
			.top1 p span {
				margin-bottom: 5px;
				line-height: 25px;
			}
			.border{
				margin: 0;
				padding: 0;
				height: 6px;
			}
			.border img{
				width: 100%;
				margin: 0 ;
				padding: 0;
				display: block;
			}
		</style>
	</head>

	<body>
		<div class="wrapper" id="shopping_mall" style=" box-sizing: border-box; padding-bottom: 40px;">
			<!--header -->
			<div class="border" style="margin-top: 5px;"><img src="__WAP__/img/icon/1.png"/></div>
			<div class="top1">
				
					<p><img src="__WAP__/img/icon/ren.png"/><span>李先生</span><span>13613820359</span></p>
					<p><img src="__WAP__/img/icon/ditu.png"/><span>深圳市南山区科技园南区R2-B三楼</span></p>
				</div>
				<div class="border"><img src="__WAP__/img/icon/1.png"/></div>
			<div class="content infinite-scroll native-scroll">
				<div class="top">
						<div class="">
							<span id="" class="fa fa-institution">
								
							</span>
						</div>

						<span id="">
							趣味农场（漯河店）
						</span>
					</div>
				<!--超市物品展示-->
				<ul class="sheep">
					
					<li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595616fe7b16f.jpg" />
						</div>
						<div class="name">
							<p>白条羊</p>
							<p><span>￥</span><span class="qian">123</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<p class="input">1</p>
							<span class="jia">+</span>
						</div>
					</li>
					<li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595619ce1b33b.jpg" />
						</div>
						<div class="name">
							<p>太阳卷</p>
							<p><span>￥</span><span class="qian">663</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<p class="input">1</p>
							<span class="jia">+</span>
						</div>
					</li>
					<li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595617b6e853f.jpg" />
						</div>
						<div class="name">
							<p>羊寸排</p>
							<p><span>￥</span><span class="qian">951</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<p class="input">1</p>
							<span class="jia">+</span>
						</div>
					</li><li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595617b6e853f.jpg" />
						</div>
						<div class="name">
							<p>羊寸排</p>
							<p><span>￥</span><span class="qian">951</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<p class="input">1</p>
							<span class="jia">+</span>
						</div>
					</li><li>
						<div class="dui">
							<span>√</span>
						</div>
						<div class="imgs">
							<img src="__WAP__/img/595617b6e853f.jpg" />
						</div>
						<div class="name">
							<p>羊寸排</p>
							<p><span>￥</span><span class="qian">951</span></p>
						</div>
						<div class="shu">
							<span class="jian">-</span>
							<p class="input">1</p>
							<span class="jia">+</span>
						</div>
					</li>

				</ul>
			</div>
			<!--footer-->
			<div class="detail04">
			<div class="quan">
				<div class="dui">
					<span>√ </span>
				</div>
				<p>全选</p>
			</div>
				<div class="" style="justify-content: space-between; ">
					<div id="" >
						<span>共</span>
						<span class="em" id="numbers">0</span>
						<span>件</span>
					</div>
					<div id="">
						<span>总计</span>
						<span>￥</span>
						<span class="em" id="qian">0</span>
					</div>

				</div>
				<div class="">
					<p onclick="window.location='{:url("Supermarket/pay")}'">结算</p>
				</div>
			</div>
			
		</div>
		<div class="background"></div>
		<div class="modal1">
			<p>是否删除本商品？</p>
			<p class="modal1_p"><span class="modal-button modal-button-bold">删除</span><span class="modal-button">取消</span></p>
		</div>
		<div class="none">
			<p class="fa fa-shopping-cart fa-4x"></p>
			<p>购物车还是空的，去挑选商品吧！</p>
			<a href="">去逛逛</a>
		</div>
		<div id="goodcover"></div>
		<script src="__WAP__/js/jquery.fly.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(".name").width(($(".sheep li").width() - 120) + "px");
			$("input").focus(function() {
				this.blur()
			})
			sa();

			function sa() {
				/*判断是否为苹果手机*/
				var u = navigator.userAgent;

				var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
				if(isiOS) {
					$(".shu span").css("line-height", "25px");
				}
			}
			/*footer 当前页选中状态*/
			sw();
			/*选中切换*/
			$(".sheep li>div:nth-child(1)").click(function() {
				$(this).toggleClass("dui");
				sw();
			})
			$(".quan div").click(function() {
				$(this).toggleClass("dui");
				var th = $(this).hasClass('dui');
				if(th == true) {
					$(".sheep li>div:nth-child(1)").addClass("dui");
				} else {
					$(".sheep li>div:nth-child(1)").removeClass("dui");
				}
				sw();
			})
			/*数量加*/
			$(".jia").click(function() {
				$(this).prev().text(parseInt($(this).prev().text()) + 1);
				var danjia = parseInt($(this).parent().prev().children("p:last-child").children("span:last-child").text()); //单价
				var shus = $(this).prev().val();
				sw();
			})
			/*数量减*/
			var nas;
			$(".jian").click(function() {
				var val = parseInt($(this).next().text());
				if(val > 1) {
					$(this).next().text(val - 1);
					sw();
				} else {
					/*deletes($(this).parent().parent());*/
					nas = $(this).parent().parent();
					$(".modal1").css("display", "block");
					$("#goodcover").css("display", "block");

				}
			})
			$(".shu input").bind('input', function() {
				if($(this).val() < 1) {
					$(this).val("1");
				} else if($(this).val() > 1) {
					$(this).val(Math.abs($(this).val()));
				} else if($(this).val() == "") {
					$(this).val("1");
				}
				sw();
			})
			/*总价数量变化*/
			function sw() {
				var quantitys = 0; //数量
				var pricess = 0; //总价
				for(var i = 0; i < $(".sheep li").length; i++) {
					var du = $(".sheep li:nth-child(" + (i + 1) + ")>div:nth-child(1)").hasClass('dui');
					if(du == true) {
						var prices = parseInt($(".sheep li:nth-child(" + (i + 1) + ") .qian").text()); //单个物品单价
						var quantity = parseInt($(".sheep li:nth-child(" + (i + 1) + ") .input").text()); //单个物品数量
						quantitys = quantitys + quantity;
						pricess = pricess + prices * quantity;
					}
				}
				$("#numbers").text(quantitys);
				$("#qian").text(pricess);

			}
			/*弹窗确定的删除*/
			$(".modal-button-bold").click(function() {
				nones();
				nas.remove();
				sw();nos();
			});

			/*弹窗*/
			$("#goodcover").click(function() {
				nones();
			})
			$(".modal1_p span:nth-child(2)").click(function() {
				nones();
			})

			function nones() {
				$(".modal1").css("display", "none");
				$("#goodcover").css("display", "none");
			}
			function nos(){
				if($(".sheep li").length ==0){
					$(".none").css("display","block");
				}
			}
		</script>
	</body>

</html>