<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
		<!--<title>我的</title>-->
		<title>趣味农场</title>
		<link rel="stylesheet" type="text/css" href="__WAP__/bootstrap-3.3.7/dist/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/header.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/style.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/spirit.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/media_quer.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/media_quer-background.css" />
		<link rel="stylesheet" href="__WAP__/css/LArea.css">
		<script src="__WAP__/js/jQuery v2.1.1.js"></script>
		<style type="text/css">
			.bank_queue {
				width: 95%;
				margin: 0 auto;
			}

			.big-button {}

			.bank_bg {
				width: 95%;
				margin: 1rem auto;
				box-sizing: border-box;
				padding-left: 1rem;
				padding-right: 1rem;
				background-color: white;
			}

			.bank_bg ul,
			.bank_bg ul li {
				width: 100%;
			}

			.bank_bg ul li {
				display: flex;
				height: 4.5rem;
				line-height: 4.5rem;
				border-top: 1px solid #ededed;
				position: relative;
			}

			.bank_bg ul li:nth-child(1) {
				/* border: none; */
			}

			.bank_bg ul li>span {
				/*width: 6rem;*/
				line-height: 4.5rem;
				position: absolute;
				top: 0;
				left: 0;
			}

			.bank_bg ul li>div {
				width: 100%;
				box-sizing: border-box;
				padding-left: 6rem;
			}

			.bank_bg ul li>div input {
				width: 100%;
				height: 3rem;
				line-height: 3rem;
				margin-top: 0.8rem;
				font-size: 15px;
				white-space: nowrap;
				text-overflow: ellipsis;
				overflow: hidden;
			}

			.region_select div {
				display: flex;
			}

			.region_select div select {
				width: 33%;
				height: 2.5rem;
				margin-top: 1rem;
				color: gray;
				font-size: 15px;
			}

			.this_bank {
				color: gray;
				position: absolute;
				top: 0;
				left: 6rem;
			}

			.bank_list {
				position: relative;
			}

			.entered {
				transform: rotate(90deg);
				position: absolute;
				top: 0;
				right: 1rem;
			}

			#red_select_list1 {
				width: 100%;
				height: 100vh;
				position: fixed;
				top: 120vh;
				left: 0;
				z-index: 1200;
				background-color: #F0F0F3;
				transition: top 0.3s;
				overflow: auto;
			}

			#red_select_list1 .red_seclet {
				width: 100%;
				height: 100%;
				overflow: scroll;
			}

			#red_select_list1 li {
				height: 3rem;
				line-height: 3rem;
				padding: 0 15px;
				width: 100%;
			}

			#closeList {
				background: #3db4cc;
				color: #fff;
			}

			#red_select_list1 li span {
				font-size: 16px;
			}

			#red_select_list1 li input {
				opacity: 0;
			}

			.close-popup {
				border-bottom: 1px solid #ededed;
				border-radius: 0;
				position: relative;
				background: #fff;
			}
			/*红包关闭*/
			/*红包 样式*/

			.default_red span {
				font-size: 0.9rem;
			}

			.clearfix {
				display: flex;
			}

			.bank_queue {
				display: none;
			}

			.kahao {
				width: 95%;
				margin: 1rem auto;
				min-height: 300px;
			}
			/*min-height:100px;//最小高度
max-height:200px;//最大高度*/

			.kahao li {
				box-sizing: border-box;
				height: 6rem;
				margin-bottom: 0.5rem;
			}

			.checkin {
				position: relative;
				padding: 1.2rem 0.75rem 1.2rem 3.65rem;
			}

			.white {
				background: #fff;
			}

			.fillet {
				border: 1px solid #ededed;
				border-radius: 0.4rem;
				background: #fff;
			}

			.checkin .bank_icon {
				position: absolute;
				top: 1.2rem;
				left: 0.75rem;
			}

			.bank_icon img {
				margin: 0;
				padding: 0;
				margin-left: -40px;
				transition: All 0.4s ease-in-out;
				-webkit-transition: All 0.4s ease-in-out;
				-moz-transition: All 0.4s ease-in-out;
				-o-transition: All 0.4s ease-in-out;
				transform: rotateY(60deg);
				-webkit-transform: rotateY(60deg);
				-moz-transform: rotateY(60deg);
				-o-transform: rotateY(60deg);
				-ms-transform: rotateY(60deg);
			}

			.kahao li a {
				position: absolute;
				left: 100px;
				top: 1rem;
			}

			.content-block {
				position: relative;
			}
			/*.content-block input{
				z-index: 3;
				opacity: 0;
			}*/

			#diz {
				position: absolute;
				right: 0;
				top: 0.8rem;
				z-index: 2;
				height: 3rem;
				line-height: 3rem;
				width: 100%;
				padding-left: 6rem;
				padding-right: 0.5rem;
				box-sizing: border-box;
				white-space: nowrap;
				text-overflow: ellipsis;
				overflow: hidden;
			}

			.detail h6 {
				padding: 0;
				margin: 0;
				color: black;
				font-size: 18px;
				margin-top: 5px;
			}

			.detail span {
				font-size: 14px;
				color: gray;
				margin-top: 5px;
			}

			body>li {
				display: none;
			}
		</style>
	</head>

	<body>
		<div class="wrapper">
			<div class="header">
				<div class="">
					<span class="icon"></span><span>返回</span>
				</div>
				<h3>添加银行卡</h3>
				<a href="{:url('member/withdrawlog');}">提现记录</a>
			</div>
			<div class="bank_queue">
				<!-- 如果没有银行卡，则以下显示-->
				<!--
			<p class="auTip a9">您只有身份认证（请到“设置”中进行认证）后才可添加银行卡，提现哦。若您已认证，请直接添加银行卡∩_∩。</p>
			<div class="no_record"></div>
			-->
				<!-- 结束-->
				<!--<p class="auTip a9" style="margin-top: 1rem;">您只有身份认证（请到“设置”中进行认证）后才可添加银行卡，提现哦。若您已认证，请直接添加银行卡∩_∩。</p>
				<div class="no_record"></div>-->
			</div>
			<!--<ul class="kahao">
				<li class="checkin white fillet">
					<div class="bank_icon">
						<img src="http://www.caifumuchang.com./public/bank/1.jpg" alt="中国工商银行">
					</div>
					<a href="###">
						<div class="detail">
							<h6>中国工商银行</h6>
							<span>尾号6789储蓄卡</span>
						</div>
					</a>
				</li>
			</ul>-->
			<div class="bank_bg white fillet">
				<ul>
					<li class="dl">
						<span class="name">持 卡 人</span>
						<div class="info">
							<input type="text" value="" id="names" placeholder="请输入持卡人姓名" maxlength="6">
						</div>
					</li>
					<li class="dl">
						<span class="name">卡号</span>
						<div class="info">
							<input id="bankcard" type="tel" placeholder="请输入卡号" maxlength="19">
						</div>
					</li>
					<li class="dl region_select">
						<span class="name">所在地</span>
						<div class="content-block">
							<!--<span id="diz">请选择地址</span>-->
							<input id="demo1" type="text" readonly="" placeholder="请选择地址" value="">
							<input id="value1" type="hidden" value="20,234,504">
						</div>

					</li>
					<li class="dl">
						<span class="name">选择银行</span>
						<div class=" bank_list open-popup">
							<p class="this_bank" >请查看银行列表</p>
							<span class="entered fr"></span>
						</div>
					</li>
					<li class="dl">
						<span class="name">开户支行</span>
						<div class="info">
							<input id="bankzone" type="text" placeholder="请输入开户行" maxlength="8">
						</div>
					</li>
					<li class="dl">
						<span class="name">账户类型</span>
						<div class=" clearfix">
							<!--<input type="hidden" id="bank_val" name="bank_val" value="1">-->
							<span class="card_type  a9" >借记卡</span>
							<span class="no_type" style="position: absolute; top: 0; right: 0;">不支持信用卡</span>
						</div>
					</li>
				</ul>
			</div>
			<button id="add" class="big-button press">添加银行卡</button>
			<div id="red_select_list1">

				<ul class="red_seclet white">
					<li class="closeList" id="closeList"><span class="">关闭</span></li>

					<li class="close-popup">
						<span class="bankName">中国工商银行</span>
						<input type="radio" value="1">
					</li>
					<li class="close-popup">
						<span class="bankName">中国农业银行</span>
						<input type="radio" value="2">
					</li>
					<li class="close-popup">
						<span class="bankName">中国建设银行</span>
						<input type="radio" value="3">
					</li>
					<li class="close-popup">
						<span class="bankName">招商银行</span>
						<input type="radio" value="4">
					</li>
					<li class="close-popup">
						<span class="bankName">中国光大银行</span>
						<input type="radio" value="5">
					</li>
					<li class="close-popup">
						<span class="bankName">中国邮政储蓄银行</span>
						<input type="radio" value="6">
					</li>
					<li class="close-popup">
						<span class="bankName">兴业银行</span>
						<input type="radio" value="7">
					</li>

					<li class="close-popup">
						<span class="bankName">交通银行</span>
						<input type="radio" value="9">
					</li>

					<li class="close-popup">
						<span class="bankName">中国银行</span>
						<input type="radio" value="8">
					</li>
					<li class="close-popup">
						<span class="bankName">中信银行</span>
						<input type="radio" value="10">
					</li>
					<li class="close-popup">
						<span class="bankName">华夏银行</span>
						<input type="radio" value="11">
					</li>
					<li class="close-popup">
						<span class="bankName">城市信用社</span>
						<input type="radio" value="13">
					</li>
					<li class="close-popup">
						<span class="bankName">恒丰银行</span>
						<input type="radio" value="14">
					</li>

					<li class="close-popup">
						<span class="bankName">中国民生银行</span>
						<input type="radio" value="17">
					</li>
					<li class="close-popup">
						<span class="bankName">中国农业发展银行</span>
						<input type="radio" value="18">
					</li>
					<li class="close-popup">
						<span class="bankName">农村商业银行</span>
						<input type="radio" value="19">
					</li>
					<li class="close-popup">
						<span class="bankName">农村信用社</span>
						<input type="radio" value="20">
					</li>
					<li class="close-popup">
						<span class="bankName">城市商业银行</span>
						<input type="radio" value="21">
					</li>
					<li class="close-popup">
						<span class="bankName">农村合作银行</span>
						<input type="radio" value="22">
					</li>

					<li class="close-popup">
						<span class="bankName">中国进出口银行</span>
						<input type="radio" value="25">
					</li>
					<li class="close-popup">
						<span class="bankName">渤海银行</span>
						<input type="radio" value="26">
					</li>
					<li class="close-popup">
						<span class="bankName">国家开发银行</span>
						<input type="radio" value="27">
					</li>
				</ul>
			</div>
		</div>
		<p class="overtop">签到成功</p>
		<li class="checkin white fillet">
			<div class="bank_icon">
				<img src="http://www.caifumuchang.com./public/bank/1.jpg" alt="中国工商银行">
			</div>
			<a href="###">
				<div class="detail">
					<h6></h6>
					<span></span>
				</div>
			</a>
		</li>
		<div class="background"></div>
		<script src="__WAP__/js/header.js" type="text/javascript" charset="utf-8"></script>
		<script src="__WAP__/js/LAreaData1.js"></script>
		<script src="__WAP__/js/LAreaData2.js"></script>
		<script src="__WAP__/js/LArea.js"></script>
		<script>
			var area1 = new LArea();
			area1.init({
				'trigger': '#demo1', //触发选择控件的文本框，同时选择完毕后name属性输出到该位置
				'valueTo': '#value1', //选择完毕后id属性输出到该位置
				'keys': {
					id: 'id',
					name: 'name'
				}, //绑定数据源相关字段 id对应valueTo的value属性输出 name对应trigger的value属性输出
				'type': 1, //数据源类型
				'data': LAreaData //数据源
			});
			//area1.value=[17,189,788];//控制初始位置，注意：该方法并不会影响到input的value
			/*$("#demo1").bind('input', function() {

							if($(this).val()==""){

							}else{
								$("#diz").text($(this).val());
							}
						})*/
		</script>
		<script type="text/javascript">
			var inp;
			//			$(".big-button").css("margin-left","-"+$(".big-button").width()/2+"px")
			$(".kahao").css("display", "none");
			$(".content-block").css("color", "")
			$(".dl div select").focus(function() {
				$(this).css("color", "black");
			})

			/*红包选择 弹出*/
			$(".bank_list").click(function() {
				$("#red_select_list1").css("top", "0");
				$(this).css("color", "black");
			})
			/*选择红包 或关闭*/
			$("#red_select_list1 ul li").click(function() {
				var tt = $("#red_select_list1 ul li").index($(this));
				if(tt == 0) {
					$("#red_select_list1").css("top", "100vh");
				} else {
					$("#red_select_list1").css("top", "100vh");
					var s1 = $(this).children().text();
					inp = $(this).children().next().val();
					$(".bank_list p").text(s1);
					$(".bank_list p").css("color", "black");
					/*alert(inp);*/
				}

			})
			/*$("#add").click(function() {
				queren();
			})*/

			$("#add").click(function() {

				if($("#names").val() == "") {
					$(".overtop").text("请输入持卡人姓名");
					overtop();
				} else {
					if($("#bankcard").val() == "") {
						$(".overtop").text("请输入卡号");
						overtop();
					} else {
						if($("#bankcard").val().length > 15 && $("#bankcard").val().length < 20) {

							if($(".this_bank").text() == "请查看银行列表") {
								$(".overtop").text("请查看银行列表");
								overtop();
							} else {
								if($("#bankzone").val() == "") {
									$(".overtop").text("请输入开户行");
									overtop();
								} else {
									if($("#demo1").val() == "") {
										$(".overtop").text("请选择地址");
										overtop();
									} else {
										$("#add").attr({
											"disabled": "disabled"
										});
										var str = $("#demo1").val();
										var strs = str.split(",");
										var name = $("#names").val();
										var cardnum = $("#bankcard").val();
										var bank_name = $(".this_bank").text();
										var bank_opening = $("#bankzone").val();
										var province_name = strs[0];
										var city_name = strs[1];
										var district_name = strs[2];
										$.ajax({
											type: "POST", //提交方式
											url: "{:url('member/addwithdraw')}", //路径
											data: {
												"name": name,
												"image": inp,
												"cardnum": cardnum,
												"bank_name": bank_name,
												"bank_opening": bank_opening,
												"province_name": province_name,
												"city_name": city_name,
												"district_name": district_name,
											},
											dataType: "json", //数据，这里使用的是Json格式进行传输
											success: function(result) {

												var aa = JSON.parse(result);
												if(aa.code == 1) {
													$(".overtop").text(aa.msg);
													overtop();


													setTimeout(function() { //使用  setTimeout（）方法设定定时2000毫秒
														$(".info input").val("");
														$("#add").removeAttr("disabled");
														window.location = '{:url("member/withdraw");}';
													}, 1000);
												} else {
													$(".overtop").text(aa.msg);
													overtop();
													$("#add").removeAttr("disabled");
												}
											},
											error: function() {
												$(".overtop").text('请刷新页面重试');
												overtop();
$("#add").removeAttr("disabled");
											}
										});
									}

								}
							}
						} else {
							$(".overtop").text("卡号错误，请重新输入");
							overtop();
						}
					}

				}
			});

			/* 填写完成 后  判断      lis 是否复制*/
			function huoqu() {
				var liss = $(".kahao li").length;
				if($(".kahao li:nth-child(" + liss + ") a .detail h6").text() == "") {
					xieru(liss);
				} else {
					$(".kahao li:nth-child(" + liss + ")").after($("body>li").clone(true));
					xieru($(".kahao li").length);
				}
			}
			/* 把填写的内容 写入 复制 区域*/
			function xieru(len) {
				/*$("#bankcard").val().substr(-4, 4);*/
				/*.substr(start, length)*/
				$(".kahao li:nth-child(" + len + ") a .detail h6").text($(".this_bank").text());
				$(".kahao li:nth-child(" + len + ") a .detail span").text("尾号" + $("#bankcard").val().substr(-4, 4) + "储蓄卡");
				$(".kahao li:nth-child(" + len + ") .bank_icon img").attr("alt", $(".this_bank").text());
				/*$(".kahao li:nth-child(" + len + ") .bank_icon img").attr("src","new_src");*/
				val();
			}
			/* 填写区域清空*/
			function val() {
				$(".bank_bg ul li div input").val("");
				$(".bank_bg ul li div textarea").val("");
				$("#s_province  option:selected").text("省份");
				$("#s_city  option:selected").text("城市");
				$("#s_county option:selected").text("城区");
			}
			/*转换*/
			function hui() {
				$(".uc_invest-box").css("display", "block");
				$(".uc_invest-box .no_sheep").css("display", "none");
				$(".uc_invest-box ul").css("display", "block");
				$(".bank_bg").css("display", "none");
				$(".header h3 ").text("提现");
				$("#add").text("添加银行卡");
				$(".kahao").css("display", "block");
			}
		</script>
	</body>

</html>