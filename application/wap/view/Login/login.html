<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>趣味农场</title>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
		<link rel="stylesheet" type="text/css" href="__WAP__/bootstrap-3.3.7/dist/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/font-awesome-4.7.0/css/font-awesome.min.css"/>
		<link rel="stylesheet" type="text/css" href="__WAP__/css/header.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/style.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/spirit.css" />
		<link rel="stylesheet" type="text/css" href="__WAP__/css/media_quer.css" />
		<script src="__WAP__/js/jQuery v2.1.1.js"></script>
		<style type="text/css">
			.titleBig {
				width: 100%;
				text-align: center;
				color: #1a1a1f;
				font-size: 1.5rem;
				padding-top: 1rem;
			}

			.logo {
				display: block;
				width: 10rem;
				height: 3rem;
				margin: 1rem auto 0.425rem auto;
				background: url(__WAP__/img/logo.png) no-repeat center center;
				background-size: cover;
			}

			.main {
				width: 100%;
				height: auto;
				margin: 0 auto;
			}

			.grassland {
				width: 100%;
				height: 10rem;
				background: url(__WAP__/img/grassland.jpg) no-repeat;
				background-size: cover;
				position: fixed;
				bottom: 0;
			}

			h3 {
				font-family: "å¾®è½¯é›…é»‘";
				font-size: 2rem;
				color: #5ac3d8;
				text-align: center;
				font-weight: normal;
				margin: 0;
				padding: 0;
			}

			.container01,
			.container02,
			.container03 {
				padding: 0 3rem;
				width: 90%;
				box-sizing: border-box;
				margin: 2rem auto;
			}

			.form_group,
			.form_modify {
				position: relative;
				height: 4rem;
				margin: 0.75rem auto 0 auto;
				border-radius: 1.5rem;
			}

			.form_group .user,
			.form_modify .number {
				background-position: center 56%;
			}

			.form_group .upwd,
			.form_modify .upwd,
			.form_modify .more {
				background-position: center 40%;
			}

			.form_modify .user,
			.form_modify .groom {
				background-position: left 28%;
			}

			.form_modify .code {
				background-position: left 67.5%;
			}

			.user,
			.upwd,
			.number,
			.more,
			.user,
			.code,
			.groom {
				position: absolute;
				top: 1rem;
				left: 1rem;
				display: inline-block;
				width: 1.6rem;
				height: 2rem;
				background: url(__WAP__/img/iconlist_01.png) no-repeat;
				background-size: cover;
			}

			.delect,
			.display {
				position: absolute;
				top: 1rem;
				right: 0.5rem;
				width: 2rem;
				height: 2rem;
				background: url(__WAP__/img/iconlist_01.png) no-repeat;
				background-size: 2rem;
			}

			.display {
				background-position: 3px 18.5%;
			}

			.display1 {
				background-position: center 78.7% !important;
			}

			.delect {
				background-position: 4px 9.5%;
			}

			.forgeted {
				margin-top: 1rem;
			}

			.forgeted a {
				color: #3db4cc !important;
			}

			.form_group input,
			.form_modify input {
				width: 100%;
				height: 4rem;
				border: 1px solid #ededed;
				border-radius: 3rem;
				padding-left: 3rem;
				box-sizing: border-box;
				font-size: 1.4rem;
				transition: border 0.2s, box-shadow 0.2s;
			}

			#getcode,
			.count_down,
			#getcode2,
			.count_down2,
			#getcode1,
			.count_down1 {
				position: absolute;
				right: 0.5rem;
				top: 1rem;
				width: 5rem;
				height: 2rem;
				line-height: 2rem;
				border-radius: 0.875rem;
				font-size: 1.2rem;
				color: #fff;
				padding: 0;
				border-bottom: 0;
				background-color: #5ac3d8;
				box-sizing: border-box;
				text-align: center;
			}

			.count_down,
			.count_down1,.count_down2 {
				display: none;
    background-color: rgba(0, 0, 0, 0.6) !important;

			}

			.register {
				color: #ffffff;
				border: 0;
				background: linear-gradient(to right, #3db4cc, #6fd6ea);
			}

			.btns {
				display: inline-block;
				border: 1px solid #5ac3d8;
				width: 80%;
				height: 3rem;
				line-height: 3rem;
				border-radius: 2rem;
				
				box-sizing: border-box;
				font-size: 1.5rem;
				text-align: center;
				margin: 1rem  10%;
			}

			.container02,
			.container03 {
				display: none;
			}

			#signup-submit,
			#signup-submit1 {
				display: block;
				width: 90%;
				height: 3rem;
				line-height: 3rem;
				border-radius: 1.5rem;
				font-size: 1.5rem;
				color: #fff;
				border: 0;
				background: linear-gradient(to right, #3db4cc, #6fd6ea);
				text-align: center;
				margin: 0.5rem auto 0 auto;
			}

			.den {
				display: block;
				width: 100%;
				text-align: center;
				color: #5ac3d8 !important;
				margin-top: 1rem;
			}

			/*wan*/
			#wang .fa{
				line-height: 20px;
				margin-right: 5px;
			}
		</style>
	</head>

	<body>
		<div class="wrapper" style="padding-bottom: 1px;">
			<div class="titleBig">请您登录</div>
			<div class="main">
				<div class="logo"></div>
				<h3>农场上的交易专家</h3>
				<div class="container01">
					<div class="form_group ">
						<span class="user"></span>
						<span class="delect"></span>
						<input type="tel" name="mobile" id="email" placeholder="请输入手机号" maxlength="11" onkeyup="this.value=this.value.replace(/\D/g, '')">
					</div>
					<div class="form_modify">
						<span class="code"></span>
						<input type="button" class="ver_code" id="getcode2" value="验证码">
						<div class="count_down2">60s</div>
						<input type="tel" id="mobile_code2" name="mobile_code" placeholder="请输入验证码" maxlength="6" onkeyup="this.value=this.value.replace(/\D/g, '')">
					</div>
					<div class="form_group " style="display: none;">
						<span class="upwd"></span>
						<span class="display"></span>
						<input type="password" name="password" id="pwd" placeholder="请输入密码" maxlength="15">
					</div>
					<div class="forgeted clearfix">
						<a href="{:url('login/wxlogin')}" class="fl m_co" id="wang" ><span id="" class="fa fa-weixin"></span><span id="">微信登录</span></a>
						<a href="{:url('index/index')}" class="fr m_co">随便逛逛</a>
					</div>
					<div class="clearfix">
						<div class="fl btns register" style="display: none;">注册</div>
						<div class="fr btns  register" id="login">登录</div>
					</div>
				</div>
				<div class="container02">
					<div class="form_modify">
						<span class="user"></span>
						<span class="delect"></span>
						<input type="tel" id="user_name" name="user_name" placeholder="请输入昵称" maxlength="10">
					</div>
					<div class="form_modify" style="display: none;">
						<span class="upwd"></span>
						<span class="delect"></span>
						<input type="password" id="user_pwd" name="user_pwd" placeholder="请输入密码(6-15位)" maxlength="15">
					</div>
					<div class="form_modify" style="display: none;">
						<span class="more"></span>
						<span class="delect"></span>
						<input type="password" id="user_pwd_confirm" name="user_pwd_confirm" placeholder="请再次输入密码" maxlength="15">
					</div>
					<div class="form_modify">
						<span class="number"></span>
						<span class="delect"></span>
						<input type="tel" id="phone" name="phone" placeholder="请输入您的手机号" maxlength="11">
					</div>
					<div class="form_modify">
						<span class="code"></span>
						<input type="button" class="ver_code" id="getcode" value="验证码">
						<div class="count_down">60s</div>
						<input type="tel" id="mobile_code" name="mobile_code" placeholder="请输入验证码" maxlength="6">
					</div>
					<div class="form_modify">
						<span class="groom"></span>
						<span class="delect"></span>
						<input type="tel" id="referer" name="referer" value="" placeholder="推荐人手机号(选填)" maxlength="11">
					</div>
					<input type="submit" value="注册" name="commit" id="signup-submit">
					<a href="###" class="den">返回登录</a>
				</div>
				<div class="container03">
					<div class="form_modify">
						<span class="number"></span>
						<span class="delect"></span>
						<input type="number" id="phone1" name="phone" placeholder="请输入您的手机号"	oninput="if(value.length>11)value=value.slice(0,11)">
					</div>
					<div class="form_modify">
						<span class="code"></span>
						<input type="button" class="ver_code" id="getcode1" value="验证码">
						<div class="count_down1">60s</div>
						<input type="tel" id="mobile_code1" name="mobile_code" placeholder="请输入验证码" maxlength="6">
					</div>
					<div class="form_modify">
						<span class="upwd"></span>
						<span class="delect"></span>
						<input type="password" id="user_pwd1" name="user_pwd" placeholder="请输入密码(6-15位)" maxlength="15">
					</div>
					<div class="form_modify">
						<span class="more"></span>
						<span class="delect"></span>
						<input type="password" id="user_pwd_confirm1" name="user_pwd_confirm" placeholder="请再次输入密码" maxlength="15">
					</div>

					<input type="submit" value="朕改好了" name="commit" id="signup-submit1">
					<a href="###" class="den">返回登录</a>
				</div>
			</div>
			<div class="grassland"></div>

		</div>

		<div class="background"></div>
		<p class="overtop">超出剩余数量</p>
		<script src="__WAP__/js/header.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			function yan1(tag, reg) {
				if(reg.test(tag.value)) {
					var mobile = $("#email").val();
					var code = $("#mobile_code2").val();
					$.ajax({
						type: "POST", //提交方式
						url: "{:url('Login/checkindex')}", //路径
						data: {
							"mobile": mobile,
							"code": code,
						},
						dataType: "json", //数据，这里使用的是Json格式进行传输
						success: function(result) {
							//$(".overtop").text("请输入用111户名")
							//var aa = JSON.parse(result);
							if(result.code == 1) {
								$(".overtop").text(result.msg);
								overtop();
							} else {
								$(".overtop").text(result.msg);
								overtop();
								setTimeout(function() { //使用  setTimeout（）方法设定定时2000毫秒
									window.location = result.url;
								}, 1000);
							}
						},
						error: function() {
							$(".overtop").text('请刷新页面重试');
							overtop();
						}
					});
				} else {
					if(tag.value == "") {
						$(".overtop").text("请输入手机号")
						overtop();
					} else {
						$(".overtop").text("手机号错误，请重新输入")
						overtop();
					}
				}
			}

			$(".container01 input").focus(function() {
				$(".grassland").css("display", "none");
			})
			$(".container01 input").blur(function() {
				$(".grassland").css("display", "block");
			})

			/*$(".display").click(function() {
				$(this).toggleClass("display1");
				var ss = $(this).hasClass("display1");
				if(ss == true) {
					$("#pwd").prop('type', 'text'); //密码可见
				} else {
					$("#pwd").prop('type', 'password'); //密码不可见
				}
			})*/
			var ema = document.getElementById("email");
			var pwd = document.getElementById("pwd");

			$(".clearfix div").click(function() {
				if($(this).text() == "登录") {
					yan1(ema, /^[1][3,4,5,7,8][0-9]{9}$/);
				} else if($(this).text() == "注册") {
					$(".grassland").css("display", "none");
					$(".container03").css("display", "none");
					$(".container01").css("display", "none");
					$(".container02").css("display", "block");
				}
			})
			/*忘记密码点击*/

			/*$("#wang").click(function() {
				$(".titleBig").text("忘记密码");
				$(".container03").css("display", "block");
				$(".container01").css("display", "none");
				$(".container02").css("display", "none");
			})*/
			/*input 清空*/
			$(".delect").click(function() {
				$(this).css("display", "none");
				$(this).next().val("");
			})

			/*注册 有密码*/
			/*$("#signup-submit").click(function() {
				if($("#user_name").val() == "") {
					$(".overtop").text("请输入用户名");
					overtop();
				} else {
					if($("#user_pwd").val() == "") {
						$(".overtop").text("请输入密码");
						overtop();
					} else {
						if($("#user_pwd_confirm").val() == "") {
							$(".overtop").text("请再次输入密码");
							overtop();
						} else {
							if($("#user_pwd_confirm").val() == $("#user_pwd").val()) {
								if($("#phone").val() == "") {
									$(".overtop").text("请输入您的手机号");
									overtop();
								} else {
									if($("#mobile_code").val() == "") {
										$(".overtop").text("请输入验证码");
										overtop();
									} else {
										var name = $("#user_name").val();
										var password = $("#user_pwd").val();
										var mobile = $("#phone").val();
										var code = $("#mobile_code").val();
										var referer = $("#referer").val();
										$.ajax({
											type: "POST", //提交方式
											url: "{:url('Login/checkreg')}", //路径
											data: {
												"mobile": mobile,
												"password": password,
												"name": name,
												"code": code,
												"referrer": referer
											},
											dataType: "json", //数据，这里使用的是Json格式进行传输
											success: function(result) {
												if(result.code == 1) {
													$(".overtop").text(result.msg);
													overtop();
												} else {
													$(".overtop").text(result.msg);
													overtop();
													setTimeout(function() { //使用  setTimeout（）方法设定定时2000毫秒
														window.location = '{:url("Login/login");}';
													}, 1000);
												}
											},
											error: function() {
												$(".overtop").text('请刷新页面重试');
												overtop();
											}
										});
									}
								}
							} else {
								$(".overtop").text("两次密码需一致");
								overtop();
							}
						}
					}
				}
			})*/
			/*注册 无密码*/
			$("#signup-submit").click(function() {
				if($("#user_name").val() == "") {
					$(".overtop").text("请输入用户名");
					overtop();
				} else {

					if($("#phone").val() == "") {
						$(".overtop").text("请输入您的手机号");
						overtop();
					} else {
						if(!(/^1[3456789]\d{9}$/.test($("#phone").val()))) {
						$(".overtop").text("手机号码有误，请重填")
						overtop();
						
					} else {
						if($("#mobile_code").val() == "") {
							$(".overtop").text("请输入验证码");
							overtop();
						} else {
							var name = $("#user_name").val();
							var password = $("#user_pwd").val();
							var mobile = $("#phone").val();
							var code = $("#mobile_code").val();
							var referer = $("#referer").val();
							$.ajax({
								type: "POST", //提交方式
								url: "{:url('Login/checkreg')}", //路径
								data: {
									"mobile": mobile,
									"password": password,
									"name": name,
									"code": code,
									"referrer": referer
								},
								dataType: "json", //数据，这里使用的是Json格式进行传输
								success: function(result) {
									if(result.code == 1) {
										$(".overtop").text(result.msg);
										overtop();
									} else {
										$(".overtop").text(result.msg);
										overtop();
										setTimeout(function() { //使用  setTimeout（）方法设定定时2000毫秒
											window.location = '{:url("Index/index");}';
										}, 1000);
									}
								},
								error: function() {
									$(".overtop").text('请刷新页面重试');
									overtop();
								}
							});
						}
						}
					}

				}
			})
			/*注册 短信*/
			$('#getcode').click(function() {
				if($("#phone").val() == "") {
					$(".overtop").text("请输入手机号");
					overtop();
				} else {
					if(!(/^1[3456789]\d{9}$/.test($("#phone").val()))) {
						$(".overtop").text("手机号码有误，请重填")
						overtop();

						
					} else {
						var mobile = $("#phone").val();
						$.ajax({
							type: "POST", //提交方式
							url: "{:url('Login/codemsg')}", //路径
							data: {
								"mobile": mobile,
								"model": 2
							},
							dataType: "json", //数据，这里使用的是Json格式进行传输
							success: function(result) {

								console.log(result);
								$(".overtop").text(result.msg);
								overtop();
							},
							error: function() {
								$(".overtop").text('请刷新页面重试');
								overtop();
							}
						});

						$(".count_down").css("display", "block");
						$(".count_down").css("z-index", "10");
						$(".count_down").css("text-align", "center");
						var s = 60;
						var j = setInterval(function() {
							s = s - 1;
							$(".count_down").html(s + "秒");
							if(s == 0) {
								$(".count_down").css("display", "none");
								clearInterval(j);
							}
						}, 1000)
					}
				}
			})
/*登录 短信*/
			$('#getcode2').click(function() {
				if($("#email").val() == "") {
					$(".overtop").text("请输入手机号");
					overtop();
				} else {
					if(!(/^1[3456789]\d{9}$/.test($("#email").val()))) {
						$(".overtop").text("手机号码有误，请重填")
						overtop();

						
					} else {
						var mobile = $("#email").val();
						$.ajax({
							type: "POST", //提交方式
							url: "{:url('Login/codemsg')}", //路径
							data: {
								"mobile": mobile,
								"model": 1
							},
							dataType: "json", //数据，这里使用的是Json格式进行传输
							success: function(result) {

								console.log(result);
								$(".overtop").text(result.msg);
								overtop();
							},
							error: function() {
								$(".overtop").text('请刷新页面重试');
								overtop();
							}
						});

						$(".count_down2").css("display", "block");
						$(".count_down2").css("z-index", "10");
						$(".count_down2").css("text-align", "center");
						var s = 60;
						var j = setInterval(function() {
							s = s - 1;
							$(".count_down2").html(s + "秒");
							if(s == 0) {
								$(".count_down2").css("display", "none");
								clearInterval(j);
							}
						}, 1000)
					}
				}
			})
			/*
			 *修改密码
			 */
			$("#signup-submit1").click(function() {
				if($("#phone1").val() == "") {
					$(".overtop").text("请输入您的手机号");
					overtop();
				} else {
					if(!(/^1[3456789]\d{9}$/.test($("#email").val()))) {
						$(".overtop").text("手机号码有误，请重填")
						overtop();

						
					} else {
					if($("#mobile_code1").val() == "") {
						$(".overtop").text("请输入验证码");
						overtop();
					} else {
						if($("#mobile_code1").val() == "") {
							$(".overtop").text("请输入密码");
							overtop();
						} else {
							if($("#user_pwd_confirm1").val() == $("#user_pwd1").val()) {
								var password = $("#user_pwd1").val();
								var mobile = $("#phone1").val();
								var code = $("#mobile_code1").val();
								$.ajax({
									type: "POST", //提交方式
									url: "{:url('Login/nopassword')}", //路径
									data: {
										"mobile": mobile,
										"password": password,
										"code": code,
									},
									dataType: "json", //数据，这里使用的是Json格式进行传输
									success: function(result) {
										if(result.code == 1) {
											$(".overtop").text(result.msg);
											overtop();
										} else {
											$(".overtop").text(result.msg);
											overtop();
											setTimeout(function() { //使用  setTimeout（）方法设定定时2000毫秒
												window.location = '{:url("Login/login");}';
											}, 1000);
										}
									},
									error: function() {
										$(".overtop").text('请刷新页面重试');
										overtop();
									}
								});

							} else {
								$(".overtop").text("请再次输入密码错误");
								overtop();
							}
						}
					}
					}

				}
			})
			/*忘记密码 获取短息验证*/
			// $('#getcode1').click(function() {
			// 	if($("#phone1").val() == "") {
			// 		$(".overtop").text("请输入手机号");
			// 		overtop();
			// 	} else {
			// 		if($("#phone1").val().length == 11) {

			// 				var mobile = $("#phone1").val();
			// 				$.ajax({
			//                     type : "POST",  //提交方式
			//                     url : "{:url('Login/codemsg')}",//路径
			//                     data : {
			//                         "mobile" : mobile,
			//                         "model" : 2
			//                     },
			//                     dataType : "json",//数据，这里使用的是Json格式进行传输
			//                     success : function(result) {

			//                     		console.log(result);
			// 							$(".overtop").text(result.msg);
			// 							overtop();
			//                     },
			//                     error : function (){
			//                     	$(".overtop").text('请刷新页面重试');
			// 						overtop();
			//                 }
			// 				});

			// 			$(".count_down1").css("display", "block");
			// 			$(".count_down1").css("z-index", "10");
			// 			$(".count_down1").css("text-align", "center");
			// 			var s = 60;
			// 			var j = setInterval(function() {
			// 				s = s - 1;
			// 				$(".count_down1").html(s + "秒");
			// 				if(s == 0) {
			// 					$(".count_down1").css("display", "none");
			// 					clearInterval(j);
			// 				}
			// 			}, 1000)
			// 		} else {
			// 			$(".overtop").text("请重新输入新手机号");
			// 			overtop();
			// 		}
			// 	}
			// })

			$(".den").click(function() {
				$(".titleBig").text("请您登录");
				$(".container03").css("display", "none");
				$(".container01").css("display", "block");
				$(".container02").css("display", "none");
				$(".grassland").css("display", "block");
			})
		</script>
	</body>

</html>